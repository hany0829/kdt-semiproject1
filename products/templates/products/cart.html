{% extends 'base.html' %}
{% load static %}
<!-- ê°€ê²©í‘œì‹œ -->
{% load humanize %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/cart.css' %}">

<h5 class="cart-h5">ì¥ë°”êµ¬ë‹ˆ</h5>

  <div class="d-flex justify-content-center mt-3">ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ìƒí’ˆì€ 7ì¼ ë™ì•ˆ ë³´ê´€ ë©ë‹ˆë‹¤.</div>

{% comment %} ìƒí’ˆ í…Œì´ë¸” {% endcomment %}
<div class="table-margin">
  <div class="my-4">
    <div class="cart-h3 h3">
      <h3>ì¼ë°˜ìƒí’ˆ()</h3>
      <table class="table table-font">   
        <thead class="table-secondary">
          <tr>
            <th scope="col">
              <span>
                <input type="checkbox" id="check-all">
              </span>
            </th>
            <th scope="col">ìƒí’ˆ</th>
            <th scope="col">ìˆ˜ëŸ‰</th>
            <th scope="col">êµ¬ë§¤ê¸ˆì•¡</th>
            <th scope="col">ë°°ì†¡ë¹„</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% if cart_items %}
          {% for cart_item in cart_items %}
          <tr>
            <th scope="row">
                <input type="checkbox" id="check-item-1">
            </th>
            <td>{{ cart_item.product.name }}</td>
            <td>
              {{ cart_item.quantity }}
            </td>
            <td>{{ cart_item.product.price|intcomma }}ì›</td>
            <td>ë¬´ë£Œ</td>
            <td>
                <form action="{% url 'products:remove_from_cart' cart_item.product.id %}" method="post">
                      {% csrf_token %}
                      <button class="btn btn-danger" type="submit">ì‚­ì œ</button>
                </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
        {% else %}
        <p>ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
      </table>
    </div>
  </div>
  {% comment %} êµ¬ë§¤ í…Œì´ë¸” {% endcomment %}

  <table class="table table-font">   
    <thead class="table-secondary">
      <tr>
        <th scope="col">
        
        </th>
        <td scope="col">ì´ ìƒí’ˆê¸ˆì•¡</td>
        <td scope="col">ì´ ë°°ì†¡ë¹„</td>
        <td scope="col">ê²°ì œì˜ˆì •ê¸ˆì•¡</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope="row">
        {{ cart_total |intcomma}}ì›
        </th>
        <td>{{ cart_total |intcomma}}ì›</td>
        <td>+0ì›</td>
        <td>{{ cart_total |intcomma}}ì›</td>
      </tr>
    </tbody>
  </table>

  <div class="mt-4">
    <div class="button1">
      <button class="btn btn-dark mx-1" data-bs-toggle="modal" data-bs-target="#buy">ì „ì²´ìƒí’ˆ ì£¼ë¬¸</button>
      <button class="btn btn-secondary mx-1" data-bs-toggle="modal" data-bs-target="#buy">ì„ íƒìƒí’ˆ ì£¼ë¬¸</button>
        <button class="btn btn-dark mx-1 mr-auto button2"><a class="button2-a" href="{% url 'products:index'%}">ì‡¼í•‘ê³„ì†í•˜ê¸°</a></button>
    </div>
  </div>
</div>


<div class="modal" id="buy" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">êµ¬ë§¤</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>êµ¬ë§¤í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ ! ìƒí’ˆì€ ë°°ì†¡ ì•ˆë©ë‹ˆë‹¤ ~ ğŸ¤ª</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary"><a class="button2-a" href="{% url 'products:index'%}">ì‡¼í•‘ê³„ì†í•˜ê¸°</a></button>
      </div>
    </div>
  </div>
</div>



<script>
  // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ê°œë³„ ì„ íƒ ì²´í¬ë°•ìŠ¤ ëª¨ë‘ ì²´í¬
  document.getElementById("check-all").addEventListener("click", function() {
    var checkboxes = document.querySelectorAll('input[id^="check-item"]');
    for (var i = 0; i < checkboxes.length; i++) {
      checkboxes[i].checked = this.checked;
    }
  });

  // ê°œë³„ ì„ íƒ ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ì²´í¬ ì—¬ë¶€ ê²°ì •
  var checkboxes = document.querySelectorAll('input[id^="check-item"]');
  for (var i = 0; i < checkboxes.length; i++) {
    checkboxes[i].addEventListener("click", function() {
      var allChecked = true;
      for (var j = 0; j < checkboxes.length; j++) {
        if (!checkboxes[j].checked) {
          allChecked = false;
          break;
        }
      }
      document.getElementById("check-all").checked = allChecked;
    });
  }
</script>
{% endblock content %}

